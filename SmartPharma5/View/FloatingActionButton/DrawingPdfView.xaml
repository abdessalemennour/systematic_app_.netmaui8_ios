<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SmartPharma5.View.FloatingActionButton.DrawingPdfView"
            xmlns:skia="clr-namespace:SkiaSharp.Views.Maui.Controls;assembly=SkiaSharp.Views.Maui.Controls"

             Title="DrawingView">
    <Grid RowDefinitions="Auto,*,Auto">
        <!-- Barre d'outils supérieure -->
        <Frame Grid.Row="0" 
       BackgroundColor="#F5F5F5" 
       Padding="10" 
       Margin="0"
       BorderColor="Transparent"
       CornerRadius="0">
            <!--<ScrollView Orientation="Horizontal">-->
                <HorizontalStackLayout Spacing="15">
                    <!-- Bouton Annuler -->
                    <Button Text="↶"
                    Clicked="OnUndoClicked"
                    BackgroundColor="Transparent"
                    TextColor="#666666"
                    WidthRequest="40"
                    HeightRequest="40"
                    CornerRadius="20"/>

                    <!-- Séparateur -->
                    <BoxView WidthRequest="1" 
                     BackgroundColor="#DDDDDD" 
                     VerticalOptions="Fill"/>

                    <!-- Boutons de couleur -->
                    <Button BackgroundColor="Black" 
                    WidthRequest="30" 
                    HeightRequest="30" 
                    CornerRadius="15"
                    Clicked="OnColorBlackClicked"/>
                    <Button BackgroundColor="Red" 
                    WidthRequest="30" 
                    HeightRequest="30" 
                    CornerRadius="15"
                    Clicked="OnColorRedClicked"/>
                    <Button BackgroundColor="Blue" 
                    WidthRequest="30" 
                    HeightRequest="30" 
                    CornerRadius="15"
                    Clicked="OnColorBlueClicked"/>
                    <Button BackgroundColor="Green" 
                    WidthRequest="30" 
                    HeightRequest="30" 
                    CornerRadius="15"
                    Clicked="OnColorGreenClicked"/>
                    <!-- Séparateur -->
                    <BoxView WidthRequest="1" 
                     BackgroundColor="#DDDDDD" 
                     VerticalOptions="Fill"/>

                    <!-- Épaisseur du trait -->
                    <StackLayout Orientation="Horizontal" 
                        Spacing="10" 
                        VerticalOptions="Center">
                        <Label Text="Épaisseur:" 
                       VerticalOptions="Center"
                       TextColor="#666666"/>
                        <Slider x:Name="StrokeWidthSlider" 
                        Minimum="1" 
                        Maximum="30" 
                        WidthRequest="100"
                        ValueChanged="OnStrokeWidthChanged"/>
                    </StackLayout>
                </HorizontalStackLayout>
            <!--</ScrollView>-->
        </Frame>
        <!-- Zone de dessin principale -->
        <skia:SKCanvasView x:Name="DrawingCanvas"
                          Grid.Row="1"
                          PaintSurface="OnCanvasPaintSurface"
                          EnableTouchEvents="True"
                          Touch="OnCanvasTouch"
                          BackgroundColor="White"
                          VerticalOptions="Fill"
                          HorizontalOptions="Fill"/>



        <!-- Overlay de contrôle -->
        <Frame Grid.Row="2" 
               BackgroundColor="#F5F5F5" 
               Padding="10" 
               Margin="0"
               BorderColor="Transparent"
               CornerRadius="0">
            <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                <Button Text="Effacer" 
                        Grid.Column="0"
                        Clicked="OnClearClicked"
                        BackgroundColor="#FF5722"
                        TextColor="White"/>


                <Button Text="Continuer" 
                        Grid.Column="3"
                        Clicked="OnContinueClicked"
                        IsEnabled="{Binding IsOcrSuccess}" 
                        BackgroundColor="#512BD4"
                        TextColor="White"/>


            </Grid>
        </Frame>
    </Grid>
</ContentPage>